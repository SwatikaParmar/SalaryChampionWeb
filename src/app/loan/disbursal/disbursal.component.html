<div class="page-wrapper">

  <!-- Header -->
  <div class="action-arr">
    <button class="back-lk" [routerLink]="['/dashboard/loan']"><i class="fa-solid fa-arrow-left"></i></button>
    <h2 class="page-title">Disbursal Bank Details</h2>
  </div>

  <!-- Card -->
  <form class="card mt-3" [formGroup]="disbursalForm" (ngSubmit)="submit()">
    <div class="row">

    <div class="col-md-12">
      <p class="subtitle">Please add your bank details</p>
    </div>

    <!-- ACCOUNT NUMBER -->
    <div class="col-md-6">
      <div class="form-group">
        <label>Account Number <span>*</span></label>
        <input type="text" formControlName="accountNumber" placeholder="Enter account number" />
        <small *ngIf="f.accountNumber.touched && f.accountNumber.invalid">
          Enter valid account number (9–18 digits)
        </small>
      </div>
    </div>

    <!-- IFSC -->
    <div class="col-md-6">
      <div class="form-group">
        <label>IFSC Code <span>*</span></label>
<input
  type="text"
  formControlName="ifsc"
  placeholder="Enter IFSC code"
  maxlength="11"
  (input)="onIfscInput($event)"
/>
        <small *ngIf="f.ifsc.touched && f.ifsc.invalid">
          Enter valid IFSC (e.g. HDFC0001234)
        </small>
      </div>
    </div>

    <!-- HOLDER NAME -->
    <div class="col-md-6">
      <div class="form-group">
        <label>Account Holder Name <span>*</span></label>
        <input type="text" formControlName="holderName" placeholder="Enter account holder name" />
        <small *ngIf="f.holderName.touched && f.holderName.invalid">
          Name is required
        </small>
      </div>
    </div>

    <!-- MOBILE -->
    <div class="col-md-6">
      <div class="form-group">
        <label>Mobile Number <span>*</span></label>
        <input type="tel" formControlName="mobile" placeholder="Enter mobile number" />
        <small *ngIf="f.mobile.touched && f.mobile.invalid">
          Enter valid 10-digit mobile number
        </small>
      </div>
    </div>

    <div class="col-md-12">
      <button class="submit-btn" [disabled]="isSubmitting">
        {{ isSubmitting ? 'Saving...' : 'Save' }}
      </button>
    </div>

    </div>
  </form>

</div>


<!-- Penny Drop Success Modal -->
<div
  class="modal fade"
  id="pennyDropSuccessModal"
  tabindex="-1"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4">

      <div class="modal-header border-0">
        <h5 class="modal-title text-success fw-bold">
          ✔ Bank Verification Successful
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>

      <div class="modal-body text-center">
        <p class="mb-0">
          Your bank account has been verified successfully via Penny Drop.
        </p>
      </div>

      <div class="modal-footer border-0 justify-content-center">
        <button
          class="btn btn-primary px-4"
          (click)="onPennyDropOk()"
        >
          OK
        </button>
      </div>

    </div>
  </div>
</div>
